<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Previdência - Dr. Reginaldo Oliveira</title>
    <meta name="description" content="Calculadora previdenciária completa para simular aposentadorias e benefícios do INSS. Simule sua aposentadoria por idade, tempo de contribuição e outros benefícios.">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>⚖️</text></svg>">
    
    <!-- Meta Tags para SEO -->
    <meta name="keywords" content="calculadora previdenciária, aposentadoria, INSS, tempo de contribuição, benefício previdenciário, simulador aposentadoria">
    <meta name="author" content="Dr. Reginaldo Oliveira">
    <meta name="robots" content="index, follow">
    
    <link rel="stylesheet" href="css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Header - Mantendo a mesma estrutura da página inicial -->
    <header class="header">
        <nav class="nav container">
            <a href="index.html" class="nav__logo">
                <div class="logo-container">
                    <div class="logo-icon">
                        <i class="fas fa-balance-scale"></i>
                    </div>
                    <div class="logo-text">
                        <span>Dr. Reginaldo Oliveira</span>
                        <small>OAB/SC 57.879</small>
                    </div>
                </div>
            </a>
            
            <div class="nav__menu" id="nav-menu">
                <ul class="nav__list">
                    <li class="nav__item">
                        <a href="index.html" class="nav__link">Início</a>
                    </li>
                    <li class="nav__item">
                        <a href="index.html#sobre" class="nav__link">Sobre</a>
                    </li>
                    <li class="nav__item">
                        <a href="index.html#atuacao" class="nav__link">Atuação</a>
                    </li>
                    <li class="nav__item">
                        <a href="calculadora.html" class="nav__link active">Calculadora</a>
                    </li>
                    <li class="nav__item">
                        <a href="index.html#diferenciais" class="nav__link">Diferenciais</a>
                    </li>
                    <li class="nav__item">
                        <a href="blog.html" class="nav__link">Artigos</a>
                    </li>
                    <li class="nav__item">
                        <a href="index.html#contato" class="nav__link">Contato</a>
                    </li>
                </ul>
                
                <div class="nav__close" id="nav-close">
                    <i class="fas fa-times"></i>
                </div>
            </div>
            
            <div class="nav__toggle" id="nav-toggle">
                <i class="fas fa-bars"></i>
            </div>
        </nav>
    </header>

    <!-- Calculator Hero -->
    <section class="calculator-hero">
        <div class="container">
            <h1 class="calculator-hero__title">Calculadora de Previdência</h1>
            <p class="calculator-hero__subtitle">Simule seus benefícios previdenciários</p>
            <p class="calculator-hero__description">
                Descubra quando e como você pode se aposentar ou receber benefícios do INSS com base nas regras atuais da previdência.
            </p>
            <div class="calculator-hero__features">
                <div class="feature">
                    <i class="fas fa-shield-alt"></i>
                    <span>Simulação 100% segura</span>
                </div>
                <div class="feature">
                    <i class="fas fa-clock"></i>
                    <span>Resultados instantâneos</span>
                </div>
                <div class="feature">
                    <i class="fas fa-user-tie"></i>
                    <span>Baseado nas regras atuais</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Calculator Disclaimer -->
    <section class="calculator-disclaimer">
        <div class="container">
            <div class="disclaimer-content">
                <i class="fas fa-exclamation-triangle"></i>
                <div>
                    <h3>Atenção</h3>
                    <p>Esta calculadora fornece uma estimativa com base nas regras atuais da previdência. Os resultados são meramente informativos e não substituem a consulta com um especialista.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Calculator Main -->
    <section class="calculator-main">
        <div class="container">
            <div class="calculator-container">
                <div class="calculator-steps">
                    <div class="step active" data-step="1">
                        <div class="step-number">1</div>
                        <div class="step-text">Tipo de Benefício</div>
                    </div>
                    <div class="step" data-step="2">
                        <div class="step-number">2</div>
                        <div class="step-text">Dados Pessoais</div>
                    </div>
                    <div class="step" data-step="3">
                        <div class="step-number">3</div>
                        <div class="step-text">Informações Profissionais</div>
                    </div>
                    <div class="step" data-step="4">
                        <div class="step-number">4</div>
                        <div class="step-text">Resultado</div>
                    </div>
                </div>

                <form id="calculatorForm" class="calculator-form">
                    <!-- Step 1 - Seleção do Tipo de Benefício -->
                    <div class="form-step active" data-step="1">
                        <h3 class="form-step__title">Qual benefício você gostaria de simular?</h3>
                        <div class="benefit-selection">
                            <div class="benefit-options">
                                <div class="benefit-option" data-benefit="age">
                                    <div class="benefit-icon">
                                        <i class="fas fa-user-clock"></i>
                                    </div>
                                    <h4>Aposentadoria por Idade</h4>
                                    <p>Simule sua aposentadoria com base na sua idade</p>
                                </div>
                                <div class="benefit-option" data-benefit="contribution">
                                    <div class="benefit-icon">
                                        <i class="fas fa-hourglass-half"></i>
                                    </div>
                                    <h4>Aposentadoria por Tempo de Contribuição</h4>
                                    <p>Calcule com base no seu tempo de contribuição</p>
                                </div>
                                <div class="benefit-option" data-benefit="disability">
                                    <div class="benefit-icon">
                                        <i class="fas fa-heartbeat"></i>
                                    </div>
                                    <h4>Auxílio-Doença</h4>
                                    <p>Simule o benefício por incapacidade temporária</p>
                                </div>
                                <div class="benefit-option" data-benefit="pension">
                                    <div class="benefit-icon">
                                        <i class="fas fa-users"></i>
                                    </div>
                                    <h4>Pensão por Morte</h4>
                                    <p>Calcule o valor da pensão para dependentes</p>
                                </div>
                                <div class="benefit-option" data-benefit="bpc">
                                    <div class="benefit-icon">
                                        <i class="fas fa-wheelchair"></i>
                                    </div>
                                    <h4>BPC/LOAS</h4>
                                    <p>Benefício de Prestação Continuada</p>
                                </div>
                                <div class="benefit-option" data-benefit="special">
                                    <div class="benefit-icon">
                                        <i class="fas fa-hard-hat"></i>
                                    </div>
                                    <h4>Aposentadoria Especial</h4>
                                    <p>Para atividades insalubres ou perigosas</p>
                                </div>
                            </div>
                        </div>
                        <div class="form-actions">
                            <div></div>
                            <button type="button" class="button button--primary next-step" data-next="2" disabled id="nextStep1">
                                Próximo
                                <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Step 2 - Dados Pessoais -->
                    <div class="form-step" data-step="2">
                        <h3 class="form-step__title">Dados Pessoais</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="birthDate">Data de Nascimento *</label>
                                <input type="date" id="birthDate" name="birthDate" required>
                            </div>
                            <div class="form-group">
                                <label for="gender">Gênero *</label>
                                <select id="gender" name="gender" required>
                                    <option value="">Selecione</option>
                                    <option value="male">Masculino</option>
                                    <option value="female">Feminino</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="maritalStatus">Estado Civil</label>
                            <select id="maritalStatus" name="maritalStatus">
                                <option value="">Selecione</option>
                                <option value="single">Solteiro(a)</option>
                                <option value="married">Casado(a)</option>
                                <option value="divorced">Divorciado(a)</option>
                                <option value="widowed">Viúvo(a)</option>
                            </select>
                        </div>
                        <div class="form-group" id="dependentsGroup" style="display: none;">
                            <label for="dependents">Número de Dependentes</label>
                            <input type="number" id="dependents" name="dependents" min="0" max="10" value="0">
                        </div>
                        <div class="form-actions">
                            <button type="button" class="button button--secondary prev-step" data-prev="1">
                                <i class="fas fa-arrow-left"></i>
                                Anterior
                            </button>
                            <button type="button" class="button button--primary next-step" data-next="3">
                                Próximo
                                <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Step 3 - Informações Profissionais -->
                    <div class="form-step" data-step="3">
                        <h3 class="form-step__title">Informações Profissionais</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="startWork">Data de Início da Contribuição *</label>
                                <input type="date" id="startWork" name="startWork" required>
                            </div>
                            <div class="form-group">
                                <label for="salary">Salário Base (R$) *</label>
                                <input type="number" id="salary" name="salary" min="1518" max="7500" step="0.01" placeholder="Ex: 3000,00" required>
                                <small>Informe um valor entre R$ 1.518,00 (salário mínimo) e R$ 7.500,00 (teto do INSS)</small>
                            </div>
                        </div>
                        <div class="form-group" id="specialPeriodsGroup" style="display: none;">
                            <label>Períodos Especiais</label>
                            <div class="checkbox-group">
                                <label class="checkbox">
                                    <input type="checkbox" name="ruralPeriod">
                                    <span class="checkmark"></span>
                                    Atividade Rural
                                </label>
                                <label class="checkbox">
                                    <input type="checkbox" name="hazardousPeriod">
                                    <span class="checkmark"></span>
                                    Atividade de Risco
                                </label>
                                <label class="checkbox">
                                    <input type="checkbox" name="teacherPeriod">
                                    <span class="checkmark"></span>
                                    Professor
                                </label>
                            </div>
                        </div>
                        <div class="form-group" id="disabilityInfoGroup" style="display: none;">
                            <label for="disabilityStart">Data de Início da Incapacidade</label>
                            <input type="date" id="disabilityStart" name="disabilityStart">
                        </div>
                        <div class="form-group" id="pensionInfoGroup" style="display: none;">
                            <label for="deceasedSalary">Salário do Falecido (R$)</label>
                            <input type="number" id="deceasedSalary" name="deceasedSalary" min="1518" max="7500" step="0.01" placeholder="Ex: 3000,00">
                        </div>
                        <div class="form-group" id="bpcInfoGroup" style="display: none;">
                            <label for="familyIncome">Renda Familiar Mensal (R$)</label>
                            <input type="number" id="familyIncome" name="familyIncome" min="0" step="0.01" placeholder="Ex: 1500,00">
                        </div>
                        <div class="form-actions">
                            <button type="button" class="button button--secondary prev-step" data-prev="2">
                                <i class="fas fa-arrow-left"></i>
                                Anterior
                            </button>
                            <button type="button" class="button button--primary calculate-btn">
                                Calcular
                                <i class="fas fa-calculator"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Step 4 - Resultado -->
                    <div class="form-step" data-step="4">
                        <h3 class="form-step__title">Resultado da Simulação</h3>
                        
                        <div class="results-container">
                            <div class="result-card highlight">
                                <div class="result-icon">
                                    <i class="fas fa-calendar-alt"></i>
                                </div>
                                <div class="result-content">
                                    <h4>Idade para Aposentadoria</h4>
                                    <div class="result-value" id="resultAge">--</div>
                                </div>
                            </div>
                            <div class="result-card">
                                <div class="result-icon">
                                    <i class="fas fa-hourglass-half"></i>
                                </div>
                                <div class="result-content">
                                    <h4>Tempo Restante</h4>
                                    <div class="result-value" id="resultTimeLeft">--</div>
                                </div>
                            </div>
                            <div class="result-card">
                                <div class="result-icon">
                                    <i class="fas fa-money-bill-wave"></i>
                                </div>
                                <div class="result-content">
                                    <h4>Valor Estimado</h4>
                                    <div class="result-value" id="resultValue">--</div>
                                </div>
                            </div>
                        </div>

                        <div class="result-details">
                            <h4>Detalhes da Simulação</h4>
                            <div class="details-grid">
                                <div class="detail-item">
                                    <span>Benefício:</span>
                                    <strong id="detailBenefit">--</strong>
                                </div>
                                <div class="detail-item">
                                    <span>Regra Aplicada:</span>
                                    <strong id="detailRule">--</strong>
                                </div>
                                <div class="detail-item">
                                    <span>Idade Atual:</span>
                                    <strong id="detailCurrentAge">--</strong>
                                </div>
                                <div class="detail-item">
                                    <span>Tempo Contribuído:</span>
                                    <strong id="detailContributedTime">--</strong>
                                </div>
                                <div class="detail-item">
                                    <span>Salário Base:</span>
                                    <strong id="detailBaseSalary">--</strong>
                                </div>
                                <div class="detail-item" id="detailDependentsItem" style="display: none;">
                                    <span>Dependentes:</span>
                                    <strong id="detailDependents">--</strong>
                                </div>
                            </div>
                        </div>

                        <div class="result-cta">
                            <div class="cta-content">
                                <h4>Precisa de ajuda especializada?</h4>
                                <p>Nossos especialistas em previdência podem te ajudar a entender melhor suas opções e planejar sua aposentadoria.</p>
                                <div class="cta-buttons">
                                    <a href="https://wa.me/5571996510966?text=Olá,%20gostaria%20de%20agendar%20uma%20consulta%20sobre%20minha%20aposentadoria" class="button button--secondary" target="_blank">
                                        <i class="fas fa-whatsapp"></i>
                                        Falar no WhatsApp
                                    </a>
                                    <a href="https://wa.me/5571996510966?text=Olá,%20gostaria%20de%20agendar%20uma%20consulta%20com%20o%20Dr.%20Reginaldo%20Oliveira" class="button button--primary" target="_blank">
                                        <i class="fas fa-phone-alt"></i>
                                        Agendar Consulta
                                    </a>
                                </div>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="button" class="button button--secondary prev-step" data-prev="3">
                                <i class="fas fa-arrow-left"></i>
                                Voltar
                            </button>
                            <button type="button" class="button button--primary new-calculation">
                                <i class="fas fa-redo"></i>
                                Nova Simulação
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <!-- FAQ Section -->
    <section class="calculator-faq">
        <div class="container">
            <h2 class="section__title">Perguntas Frequentes</h2>
            <div class="faq-grid">
                <div class="faq-item">
                    <h3>Como a calculadora funciona?</h3>
                    <p>A calculadora simula seu benefício previdenciário com base nas regras atuais da previdência, considerando seus dados pessoais e profissionais.</p>
                </div>
                <div class="faq-item">
                    <h3>Os resultados são precisos?</h3>
                    <p>Os resultados são estimativas baseadas nas regras atuais. Para uma análise precisa, consulte um especialista em direito previdenciário.</p>
                </div>
                <div class="faq-item">
                    <h3>Quais benefícios posso simular?</h3>
                    <p>A calculadora permite simular aposentadoria por idade, tempo de contribuição, auxílio-doença, pensão por morte, BPC/LOAS e aposentadoria especial.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer - Mantendo a mesma estrutura da página inicial -->
    <footer class="footer">
        <div class="footer__container container grid">
            <div class="footer__content">
                <a href="index.html" class="footer__logo">
                    <div class="logo-container">
                        <div class="logo-icon">
                            <i class="fas fa-balance-scale"></i>
                        </div>
                        <div class="logo-text">
                            <span>Dr. Reginaldo Oliveira</span>
                        </div>
                    </div>
                </a>
                <p class="footer__description">
                    Advogado especialista em Direito Previdenciário. 
                    Defendendo seus direitos com excelência e compromisso.
                </p>
            </div>
            
            <div class="footer__content">
                <h3 class="footer__title">Navegação</h3>
                <ul class="footer__links">
                    <li><a href="index.html" class="footer__link">Início</a></li>
                    <li><a href="index.html#sobre" class="footer__link">Sobre</a></li>
                    <li><a href="index.html#atuacao" class="footer__link">Atuação</a></li>
                    <li><a href="blog.html" class="footer__link">Artigos</a></li>
                </ul>
            </div>
            
            <div class="footer__content">
                <h3 class="footer__title">Contato</h3>
                <ul class="footer__contact">
                    <li>
                        <i class="fas fa-phone footer__contact-icon"></i>
                        (71) 99651-0966
                    </li>
                    <li>
                        <i class="fas fa-envelope footer__contact-icon"></i>
                        contato@juridicamente.blog
                    </li>
                    <li>
                        <i class="fas fa-map-marker-alt footer__contact-icon"></i>
                        Atendimento em Todo Brasil
                    </li>
                </ul>
            </div>
        </div>
        
        <div class="footer__copy">
            <p>&copy; 2025 Dr. Reginaldo Oliveira - OAB/SC 57.879. Todos os direitos reservados.</p>
        </div>
    </footer>

    <!-- WhatsApp Float -->
    <a href="https://wa.me/5571996510966?text=Olá,%20gostaria%20de%20agendar%20uma%20consulta%20com%20o%20Dr.%20Reginaldo%20Oliveira" class="whatsapp-float" target="_blank" aria-label="Entre em contato pelo WhatsApp">
        <i class="fab fa-whatsapp"></i>
    </a>

    <!-- Script do Menu Hamburguer -->
    <script>
        // Menu Hamburguer - Código para funcionar em dispositivos móveis
        document.addEventListener('DOMContentLoaded', function() {
            const navToggle = document.getElementById('nav-toggle');
            const navClose = document.getElementById('nav-close');
            const navMenu = document.getElementById('nav-menu');
            
            if(navToggle) {
                navToggle.addEventListener('click', () => {
                    navMenu.classList.add('show-menu');
                });
            }
            
            if(navClose) {
                navClose.addEventListener('click', () => {
                    navMenu.classList.remove('show-menu');
                });
            }
            
            // Fechar menu ao clicar em um link
            const navLinks = document.querySelectorAll('.nav__link');
            navLinks.forEach(link => {
                link.addEventListener('click', () => {
                    navMenu.classList.remove('show-menu');
                });
            });
        });
    </script>

    <script>
        // Calculator JavaScript - Versão Atualizada 2025
        document.addEventListener('DOMContentLoaded', function() {
            // Constantes importantes atualizadas para 2025
            const SALARIO_MINIMO = 1518.00; // Salário mínimo 2025
            const TETO_INSS = 7500.00; // Teto do INSS 2025

            // Elementos da calculadora
            const steps = document.querySelectorAll('.form-step');
            const stepIndicators = document.querySelectorAll('.calculator-steps .step');
            const nextButtons = document.querySelectorAll('.next-step');
            const prevButtons = document.querySelectorAll('.prev-step');
            const calculateButton = document.querySelector('.calculate-btn');
            const newCalculationButton = document.querySelector('.new-calculation');
            const benefitOptions = document.querySelectorAll('.benefit-option');
            const nextStep1Button = document.getElementById('nextStep1');
            
            // Estado da calculadora
            let currentStep = 1;
            let selectedBenefit = null;
            let formData = {};

            // Inicialização
            initCalculator();

            function initCalculator() {
                bindEvents();
                showStep(1);
            }

            function bindEvents() {
                // Seleção de benefício
                benefitOptions.forEach(option => {
                    option.addEventListener('click', function() {
                        // Remove seleção anterior
                        benefitOptions.forEach(opt => opt.classList.remove('selected'));
                        
                        // Adiciona seleção atual
                        this.classList.add('selected');
                        selectedBenefit = this.getAttribute('data-benefit');
                        
                        // Habilita o botão próximo
                        nextStep1Button.disabled = false;
                        
                        // Atualiza campos do formulário
                        updateFormFields();
                    });
                });

                // Botões próximo
                nextButtons.forEach(button => {
                    button.addEventListener('click', function() {
                        const nextStep = parseInt(this.getAttribute('data-next'));
                        if (validateStep(currentStep)) {
                            saveStepData(currentStep);
                            showStep(nextStep);
                        }
                    });
                });

                // Botões anterior
                prevButtons.forEach(button => {
                    button.addEventListener('click', function() {
                        const prevStep = parseInt(this.getAttribute('data-prev'));
                        showStep(prevStep);
                    });
                });

                // Botão calcular
                calculateButton.addEventListener('click', function() {
                    if (validateStep(3)) {
                        saveStepData(3);
                        calculateResults();
                        showStep(4);
                    }
                });

                // Botão nova simulação
                newCalculationButton.addEventListener('click', resetCalculator);

                // Atualizar campos quando estado civil mudar
                document.getElementById('maritalStatus').addEventListener('change', function() {
                    const dependentsGroup = document.getElementById('dependentsGroup');
                    if (this.value === 'married' || this.value === 'widowed') {
                        dependentsGroup.style.display = 'block';
                    } else {
                        dependentsGroup.style.display = 'none';
                    }
                });
            }

            function updateFormFields() {
                const specialPeriodsGroup = document.getElementById('specialPeriodsGroup');
                const disabilityInfoGroup = document.getElementById('disabilityInfoGroup');
                const pensionInfoGroup = document.getElementById('pensionInfoGroup');
                const bpcInfoGroup = document.getElementById('bpcInfoGroup');

                // Esconde todos os grupos primeiro
                specialPeriodsGroup.style.display = 'none';
                disabilityInfoGroup.style.display = 'none';
                pensionInfoGroup.style.display = 'none';
                bpcInfoGroup.style.display = 'none';

                // Mostra grupos relevantes baseado no benefício selecionado
                switch(selectedBenefit) {
                    case 'special':
                        specialPeriodsGroup.style.display = 'block';
                        break;
                    case 'disability':
                        disabilityInfoGroup.style.display = 'block';
                        break;
                    case 'pension':
                        pensionInfoGroup.style.display = 'block';
                        break;
                    case 'bpc':
                        bpcInfoGroup.style.display = 'block';
                        break;
                }
            }

            function showStep(step) {
                // Esconde todos os passos
                steps.forEach(s => s.classList.remove('active'));
                
                // Mostra o passo atual
                document.querySelector(`.form-step[data-step="${step}"]`).classList.add('active');
                
                // Atualiza indicadores de progresso
                stepIndicators.forEach(indicator => {
                    indicator.classList.remove('active');
                    if (parseInt(indicator.getAttribute('data-step')) <= step) {
                        indicator.classList.add('active');
                    }
                });
                
                currentStep = step;
            }

            function validateStep(step) {
                let isValid = true;
                const currentStepEl = document.querySelector(`.form-step[data-step="${step}"]`);
                
                // Validação do passo 1
                if (step === 1) {
                    if (!selectedBenefit) {
                        showError('Selecione um tipo de benefício para continuar');
                        isValid = false;
                    }
                }
                
                // Validação dos passos 2 e 3
                if (step === 2 || step === 3) {
                    const requiredInputs = currentStepEl.querySelectorAll('input[required], select[required]');
                    
                    requiredInputs.forEach(input => {
                        if (!input.value) {
                            input.classList.add('error');
                            isValid = false;
                        } else {
                            input.classList.remove('error');
                        }
                    });
                    
                    // Validações específicas
                    if (step === 2) {
                        const birthDate = new Date(document.getElementById('birthDate').value);
                        const today = new Date();
                        
                        if (birthDate >= today) {
                            showError('Data de nascimento não pode ser futura');
                            isValid = false;
                        }
                    }
                    
                    if (step === 3) {
                        const birthDate = new Date(document.getElementById('birthDate').value);
                        const startWork = new Date(document.getElementById('startWork').value);
                        const today = new Date();
                        const salary = parseFloat(document.getElementById('salary').value);
                        
                        if (startWork >= today) {
                            showError('Data de início não pode ser futura');
                            isValid = false;
                        }
                        
                        if (startWork < birthDate) {
                            showError('Data de início não pode ser anterior ao nascimento');
                            isValid = false;
                        }
                        
                        if (salary < SALARIO_MINIMO || salary > TETO_INSS) {
                            showError(`Salário deve estar entre R$ ${SALARIO_MINIMO.toLocaleString('pt-BR', {minimumFractionDigits: 2})} (salário mínimo) e R$ ${TETO_INSS.toLocaleString('pt-BR', {minimumFractionDigits: 2})} (teto do INSS)`);
                            isValid = false;
                        }
                    }
                }
                
                if (!isValid) {
                    showError('Preencha todos os campos obrigatórios corretamente');
                }
                
                return isValid;
            }

            function showError(message) {
                // Remove mensagens de erro existentes
                const existingError = document.querySelector('.error-message');
                if (existingError) {
                    existingError.remove();
                }
                
                // Cria nova mensagem de erro
                const errorDiv = document.createElement('div');
                errorDiv.className = 'error-message';
                errorDiv.innerHTML = `
                    <i class="fas fa-exclamation-circle"></i>
                    ${message}
                `;
                
                // Insere a mensagem de erro
                const currentStepEl = document.querySelector(`.form-step[data-step="${currentStep}"]`);
                currentStepEl.insertBefore(errorDiv, currentStepEl.firstChild);
                
                // Remove automaticamente após 5 segundos
                setTimeout(() => {
                    errorDiv.remove();
                }, 5000);
            }

            function saveStepData(step) {
                const stepEl = document.querySelector(`.form-step[data-step="${step}"]`);
                const inputs = stepEl.querySelectorAll('input, select');
                
                inputs.forEach(input => {
                    if (input.type === 'checkbox') {
                        formData[input.name] = input.checked;
                    } else {
                        formData[input.name] = input.value;
                    }
                });
                
                // Salva o benefício selecionado
                if (step === 1) {
                    formData.benefitType = selectedBenefit;
                }
            }

            function calculateResults() {
                const birthDate = new Date(formData.birthDate);
                const startWork = new Date(formData.startWork);
                const salary = parseFloat(formData.salary);
                const gender = formData.gender;
                const benefitType = formData.benefitType;
                const dependents = parseInt(formData.dependents) || 0;

                const today = new Date();
                const currentAge = calculateAge(birthDate, today);
                const contributedTime = calculateTimeDifference(startWork, today);

                let resultAge, resultTimeLeft, resultValue, detailRule, benefitName;

                // Calcula baseado no tipo de benefício
                switch (benefitType) {
                    case 'age':
                        benefitName = 'Aposentadoria por Idade';
                        // Regra atual: 65 anos (homem) / 62 anos (mulher) + 15 anos de contribuição
                        resultAge = gender === 'male' ? 65 : 62;
                        resultTimeLeft = Math.max(0, resultAge - currentAge);
                        resultValue = calculateAgeRetirementValue(salary, gender, contributedTime.years);
                        detailRule = 'Idade mínima: ' + (gender === 'male' ? '65 anos' : '62 anos') + ' + 15 anos de contribuição';
                        break;

                    case 'contribution':
                        benefitName = 'Aposentadoria por Tempo de Contribuição';
                        // Regra atual: 35 anos (homem) / 30 anos (mulher) de contribuição
                        const requiredTime = gender === 'male' ? 35 : 30;
                        resultAge = currentAge + Math.max(0, requiredTime - contributedTime.years);
                        resultTimeLeft = Math.max(0, requiredTime - contributedTime.years);
                        resultValue = calculateTimeRetirementValue(salary, contributedTime.years, gender);
                        detailRule = 'Tempo mínimo: ' + requiredTime + ' anos de contribuição';
                        break;

                    case 'disability':
                        benefitName = 'Auxílio-Doença';
                        resultAge = '-';
                        resultTimeLeft = '-';
                        resultValue = calculateDisabilityValue(salary);
                        detailRule = 'Carência de 12 meses e incapacidade temporária comprovada';
                        break;

                    case 'pension':
                        benefitName = 'Pensão por Morte';
                        resultAge = '-';
                        resultTimeLeft = '-';
                        const deceasedSalary = parseFloat(formData.deceasedSalary) || salary;
                        resultValue = calculatePensionValue(deceasedSalary, dependents);
                        detailRule = 'Baseado no salário do falecido e número de dependentes';
                        break;

                    case 'bpc':
                        benefitName = 'BPC/LOAS';
                        resultAge = '-';
                        resultTimeLeft = '-';
                        resultValue = calculateBPCValue();
                        detailRule = 'Para idosos (65+) ou pessoas com deficiência, com renda familiar per capita inferior a 1/4 do salário mínimo';
                        break;

                    case 'special':
                        benefitName = 'Aposentadoria Especial';
                        // 25, 20 ou 15 anos dependendo do grau de risco
                        const specialYears = 25; // Para atividades de alto risco
                        resultAge = currentAge + Math.max(0, specialYears - contributedTime.years);
                        resultTimeLeft = Math.max(0, specialYears - contributedTime.years);
                        resultValue = calculateSpecialRetirementValue(salary);
                        detailRule = specialYears + ' anos de atividade especial (alto risco)';
                        break;
                }

                // Atualiza resultados no DOM
                updateResults({
                    resultAge: resultAge + (resultAge !== '-' ? ' anos' : ''),
                    resultTimeLeft: resultTimeLeft + (resultTimeLeft !== '-' ? ' anos' : ''),
                    resultValue: 'R$ ' + (typeof resultValue === 'number' ? resultValue.toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) : resultValue),
                    detailBenefit: benefitName,
                    detailRule: detailRule,
                    detailCurrentAge: currentAge + ' anos',
                    detailContributedTime: contributedTime.years + ' anos e ' + contributedTime.months + ' meses',
                    detailBaseSalary: 'R$ ' + salary.toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 })
                });

                // Mostra dependentes se aplicável
                const dependentsItem = document.getElementById('detailDependentsItem');
                if (benefitType === 'pension' && dependents > 0) {
                    document.getElementById('detailDependents').textContent = dependents;
                    dependentsItem.style.display = 'flex';
                } else {
                    dependentsItem.style.display = 'none';
                }
            }

            function calculateAge(birthDate, currentDate) {
                let age = currentDate.getFullYear() - birthDate.getFullYear();
                const monthDiff = currentDate.getMonth() - birthDate.getMonth();
                
                if (monthDiff < 0 || (monthDiff === 0 && currentDate.getDate() < birthDate.getDate())) {
                    age--;
                }
                
                return age;
            }

            function calculateTimeDifference(startDate, endDate) {
                let years = endDate.getFullYear() - startDate.getFullYear();
                let months = endDate.getMonth() - startDate.getMonth();
                
                if (months < 0) {
                    years--;
                    months += 12;
                }
                
                return { years, months };
            }

            function calculateAgeRetirementValue(salary, gender, contributedYears) {
                // Cálculo realista baseado na média dos 80% maiores salários
                // Mínimo: salário mínimo, Máximo: teto do INSS
                let percentage = 0.6; // 60% base
                
                // Acréscimo de 2% por ano acima de 20 anos (homem) ou 15 anos (mulher)
                const baseYears = gender === 'male' ? 20 : 15;
                if (contributedYears > baseYears) {
                    percentage += (contributedYears - baseYears) * 0.02;
                }
                
                percentage = Math.min(percentage, 1.0); // Máximo de 100%
                
                let value = salary * percentage;
                value = Math.max(value, SALARIO_MINIMO); // Não pode ser menor que salário mínimo
                value = Math.min(value, TETO_INSS); // Não pode ultrapassar teto do INSS
                
                return value;
            }

            function calculateTimeRetirementValue(salary, contributedYears, gender) {
                // Cálculo para aposentadoria por tempo de contribuição
                let percentage = 0.6; // 60% base
                
                // Acréscimo de 2% por ano acima de 20 anos (homem) ou 15 anos (mulher)
                const baseYears = gender === 'male' ? 20 : 15;
                if (contributedYears > baseYears) {
                    percentage += (contributedYears - baseYears) * 0.02;
                }
                
                percentage = Math.min(percentage, 1.0); // Máximo de 100%
                
                let value = salary * percentage;
                value = Math.max(value, SALARIO_MINIMO); // Não pode ser menor que salário mínimo
                value = Math.min(value, TETO_INSS); // Não pode ultrapassar teto do INSS
                
                return value;
            }

            function calculateDisabilityValue(salary) {
                // Auxílio-doença: 91% do salário de benefício
                let value = salary * 0.91;
                value = Math.max(value, SALARIO_MINIMO); // Não pode ser menor que salário mínimo
                value = Math.min(value, TETO_INSS); // Não pode ultrapassar teto do INSS
                return value;
            }

            function calculatePensionValue(salary, dependents) {
                // Pensão por morte: 50% + 10% por dependente (até 100%)
                let percentage = 0.5 + (dependents * 0.1);
                percentage = Math.min(percentage, 1.0); // Máximo de 100%
                
                let value = salary * percentage;
                value = Math.max(value, SALARIO_MINIMO); // Não pode ser menor que salário mínimo
                value = Math.min(value, TETO_INSS); // Não pode ultrapassar teto do INSS
                return value;
            }

            function calculateBPCValue() {
                // BPC/LOAS: 1 salário mínimo
                return SALARIO_MINIMO;
            }

            function calculateSpecialRetirementValue(salary) {
                // Aposentadoria especial: 100% da média
                let value = salary;
                value = Math.max(value, SALARIO_MINIMO); // Não pode ser menor que salário mínimo
                value = Math.min(value, TETO_INSS); // Não pode ultrapassar teto do INSS
                return value;
            }

            function updateResults(results) {
                Object.keys(results).forEach(key => {
                    const element = document.getElementById(key);
                    if (element) {
                        element.textContent = results[key];
                    }
                });
            }

            function resetCalculator() {
                // Reseta o formulário
                document.getElementById('calculatorForm').reset();
                
                // Reseta seleção de benefício
                benefitOptions.forEach(opt => {
                    opt.classList.remove('selected');
                });
                selectedBenefit = null;
                nextStep1Button.disabled = true;
                
                // Reseta dados do formulário
                formData = {};
                
                // Esconde todos os campos especiais
                document.getElementById('specialPeriodsGroup').style.display = 'none';
                document.getElementById('disabilityInfoGroup').style.display = 'none';
                document.getElementById('pensionInfoGroup').style.display = 'none';
                document.getElementById('bpcInfoGroup').style.display = 'none';
                document.getElementById('dependentsGroup').style.display = 'none';
                document.getElementById('detailDependentsItem').style.display = 'none';
                
                // Volta para o primeiro passo
                showStep(1);
                
                // Remove mensagens de erro
                const errorMessages = document.querySelectorAll('.error-message');
                errorMessages.forEach(msg => msg.remove());
            }
        });
    </script>

    <style>
        /* Estilos adicionais para a calculadora */
        .benefit-selection {
            margin-bottom: 2rem;
        }

        .benefit-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
        }

        .benefit-option {
            background: var(--container-color);
            border: 2px solid var(--border-color);
            border-radius: 15px;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .benefit-option:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            border-color: var(--primary-color);
        }

        .benefit-option.selected {
            border-color: var(--secondary-color);
            background: rgba(212, 175, 55, 0.05);
        }

        .benefit-icon {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .benefit-option h4 {
            margin-bottom: 0.5rem;
            color: var(--primary-color);
        }

        .benefit-option p {
            color: var(--text-light);
            font-size: 0.9rem;
            line-height: 1.4;
        }

        @media screen and (max-width: 768px) {
            .benefit-options {
                grid-template-columns: 1fr;
            }
        }
    </style>
</body>
</html>
